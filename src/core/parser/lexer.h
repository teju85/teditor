#pragma once

#include <stdint.h>
#include <core/pos2d.h>
#include <vector>

namespace teditor {
namespace parser {

/** Represents a token that is being generated by the Lexer */
struct Token {
  /**
   * token type. Custom parsers are free to define their own types for their
   * internal use. But from an interface perspective, it'll always be an integer
   * for faster lookup.
   */
  uint32_t type;
  /** start of this token in the input stream */
  Point start;
  /** end of this token in the input stream */
  Point end;

  bool isEof() const { return type == End; }

  /** special reserved token for denoting EOF */
  static const size_t End;
};  // struct Token


/** Represents a node in the parse tree */
struct Node : public std::vector<Node*> {
  /** current node contents */
  Token token;

  ~Node() { for (auto n : *this) delete n; }
  bool isLeaf() const { return empty(); }
};  // struct Node

}  // namespace parser
}  // namespace teditor
